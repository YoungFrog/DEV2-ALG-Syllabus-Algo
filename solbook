#!/bin/bash
output=solutionbook/solutions.tex
sources=(syllabus/{tableau2D,oo,liste,rupture,donnee}.tex)

## Ce script extrait les solutions écrites dans les fichiers .tex
## (sous forme d'un environnement /Solution/ qui suit l'environnement
## /Exercice/ concerné) et produit le fichier $output, qui peut être
## compilé normalement ensuite (cf Makefile)

echo "%DO NOT EDIT THIS FILE -- CHANGES WILL BE LOST -- see ../solbook" >"$output"


awk -v hide=1 '
	/chapter/ {print} 
	/end{Exercice}/ {print "\\refstepcounter{Exercice}\n"} 
	/begin{Solution}/ {hide=0} 
	/end{Solution}/ {hide=1;print $0 "\n"} 
	hide==0 {print}
	' "${sources[@]}" >>"$output"

